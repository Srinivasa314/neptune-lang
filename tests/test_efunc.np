const {assert_eq, assert_failed} = import("assert.np")
const {ecall} = import("vm")

assert_eq(ecall(@add,{a:1,b:2}),3)
assert_failed(||ecall(@fur,null),Error,"Cannot find EFunc fur")
assert_failed(||ecall(@add,1),EFuncError,'TypeError')
let result = ecall(@firstRest,[1.0,2.0,3.0,4.0])
assert_eq(result.first, 1.0)
assert_eq(result.rest, [2.0,3.0,4.0])
assert_eq(ecall(@test_sym,@abc),@baz)
assert_eq(ecall(@test_sym,@def),@ja)
assert_failed(||ecall(@test_sym,@o),Error,"invalid!!!")
result = ecall(@foo,["jgh",false])
assert_eq(result[0],false)
assert_eq(result[1][1],2)
assert_eq(result[1][3],4)
assert_eq(result[2],"jgh")